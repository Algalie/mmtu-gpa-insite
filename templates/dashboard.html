{% extends "base.html" %}

{% block content %}
<div class="dashboard">
    <header class="dashboard-header">
        <div class="header-content">
            <div style="display: flex; align-items: center; margin-bottom: 1rem;">
                <div class="logo-small">
                    <img src="{{ url_for('static', filename='images/mmtu-logo.png') }}" 
                         alt="MMTU Logo" 
                         onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align: center; padding: 5px;\'><strong>MMTU</strong></div>';">
                </div>
                <div>
                    <h1>Welcome, {{ session.student_name }}!</h1>
                    <p class="student-id">Student ID: {{ session.student_id }}</p>
                    <p class="student-id">Department: {{ user.department if user else 'Not specified' }}</p>
                </div>
            </div>
        </div>
        
        <div class="header-actions">
            <a href="{{ url_for('logout') }}" class="btn-logout">
                Logout
            </a>
        </div>
    </header>

    <!-- Feedback Notification -->
    {% if has_feedback %}
    <div class="feedback-notification" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
        <div style="display: flex; align-items: center; justify-content: space-between;">
            <div style="display: flex; align-items: center; gap: 15px;">
                <div style="font-size: 24px;">ğŸ’¬</div>
                <div>
                    <h4 style="margin: 0 0 5px 0; color: white;">New Message from Admin!</h4>
                    <p style="margin: 0; opacity: 0.9;">Share your feedback about the system and help us improve</p>
                </div>
            </div>
            <a href="{{ url_for('feedback') }}" 
               style="background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; border-radius: 25px; text-decoration: none; border: 1px solid rgba(255,255,255,0.3); transition: all 0.3s; white-space: nowrap;"
               onmouseover="this.style.background='rgba(255,255,255,0.3)'; this.style.transform='translateY(-2px)';"
               onmouseout="this.style.background='rgba(255,255,255,0.2)'; this.style.transform='translateY(0)';">
                View Message <i class="fas fa-arrow-right" style="margin-left: 5px;"></i>
            </a>
        </div>
    </div>
    {% endif %}

    <div class="dashboard-grid">
        <a href="{{ url_for('set_modules') }}" class="dashboard-card">
            <h3>ğŸ“Š Set Modules</h3>
            <p>Choose how many modules you want to calculate for this semester</p>
        </a>
        
        <a href="{{ url_for('modules_input') }}" class="dashboard-card">
            <h3>ğŸ“ Enter Grades</h3>
            <p>Input your grades and mark reference modules for calculation</p>
        </a>

        <a href="{{ url_for('final_calculation') }}" class="dashboard-card">
            <h3>ğŸ¯ Final GPA</h3>
            <p>Calculate your final GPA by combining two semesters</p>
        </a>

        <a href="{{ url_for('final_records') }}" class="dashboard-card">
            <h3>ğŸ“Š Final Records</h3>
            <p>View your saved final GPA calculations</p>
        </a>
        
        <a href="{{ url_for('saved_records') }}" class="dashboard-card">
            <h3>ğŸ“ Saved Records</h3>
            <p>View and manage your previously saved GPA calculations</p>
        </a>
        
        <a href="{{ url_for('profile') }}" class="dashboard-card">
            <h3>ğŸ‘¤ Profile</h3>
            <p>Update your personal information and change password</p>
        </a>
    </div>

    <div class="quick-help">
        <h3>ğŸš€ How it works:</h3>
        <ul>
            <li>Mark modules as references to step grades down by one level</li>
            <li>E or F grades block calculation - contact your faculty</li>
            <li>Save your results with descriptive titles for future reference</li>
        </ul>
        
        <h3>ğŸ¯ GPA Classification:</h3>
        <ul>
            <li>4.0+ â†’ Excellent Pass ğŸ†</li>
            <li>3.0 - 3.99 â†’ Pass âœ…</li>
            <li>2.7 - 2.99 â†’ Fail âš ï¸</li>
            <li>Below 2.7 â†’ Withdrew âŒ</li>
        </ul>
    </div>
</div>

<style>
.feedback-notification {
    animation: slideInDown 0.5s ease-out;
}

@keyframes slideInDown {
    from {
        transform: translateY(-20px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.dashboard-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.dashboard-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}
</style>
{% endblock %}
